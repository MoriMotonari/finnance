{% extends "main/layout.j2" %}
{% import "main/trans_modal.j2" as trans_modal %}
{% import "main/macros.j2" as macros %}

{% block body %}

<div class="row">
    <div class="col-10">
        <h1 class="display-4">{{ account.desc }}</h1>
    </div>
    <div class="col-2">
        <button class="btn btn-primary btn-lg btn-block">Edit</button>
    </div>
</div>

<h2>{{ account.currency.code }} {{ saldo }}</h2>
<p class="lead">Started at: {{ account.date_created.strftime('%x') }} with {{ account.currency.code}} {{ account.starting() }}</p>

<button type="button" class="btn btn-primary btn-lg mb-2" data-toggle="modal" data-target="#transModal{{ account.id }}">
    New Transaction
</button>
<!-- Modal -->
<!-- defined in included trans_modals.j2 -->
{{ trans_modal.modal(account, url_for('main.account', account_id=account.id), agents, categories, none) }}

<table class="table table-hover clickable-table">
    <caption><a href="{{ url_for('main.account_transactions', account_id=account.id) }}">More...</a></caption>
    {{ macros.trans_table_head() }}
    <tbody>
        {{ macros.trans_table_forloop(last_5, url_for("main.account", account_id=account.id), account, agents, categories) }}
    </tbody>
</table>

<a href="{{ url_for('main.account_plot', account_id=account.id) }}">
    <img src="{{ url_for('main.account_plot', account_id=account.id) }}" class="img-fluid img-thumbnail mb-2" alt="Responsive image">
</a>

<form action="{{ url_for('main.account_analysis', account_id=account.id) }}">
    <button type="submit" class="btn btn-primary btn-lg btn-block mb-5">Analysis</button>
</form>

{% endblock %}