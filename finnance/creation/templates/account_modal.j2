<div class="modal fade" data-backdrop="static" id="accModal" tabindex="-1"
    role="dialog" aria-labelledby="accLabel" aria-hidden>
    <div class="modal-dialog modal-lg" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="accLabel">Create Account</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden>&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <form action="{{ url_for('creation.add_account') }}" method="post" id="accForm">
                    <div class="form-group">
                        <label for="description">Account Description</label>
                        <input class="form-control" type="text" name="description" maxlength=32 required>
                    </div>
                    <div class="form-row">
                        <div class="col-md-6 form-group">
                            <label for="currency">Currency</label>
                            <select class="form-control" name="currency" required>
                                {% for currency in currencies %}
                                <option value="{{ currency.id }}"
                                    data-decs="{{ currency.decimals }}">{{ currency.code }}</option>
                                {% endfor %}
                            </select>
                        </div>
                        <div class="col-md-6 form-group">
                            <label for="color">Color</label>
                            <input class="color-form-control" type="color" name="color" value="#5cd1ff" required>
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="starting_saldo">Starting Saldo</label>
                        <input class="form-control" type="number" name="starting_saldo" required>
                        <small class="form-text text-muted" id="saldo_dec"></small>
                    </div>
                    <div class="form-group">
                        <label for="date_created">Date from when Account is tracked on Finnance</label>
                        <input class="form-control" type="text" name="date_created" maxlength=10 
                            pattern="((0[1-9]|[12]\d|3[01]).(0[13578]|1[02]).\d{4}|(0[1-9]|[12]\d|30).(0[469]|11).\d{4}|(0[1-9]|1\d|2[0-8]).02.\d{4}|29.02.\d\d(0[048]|[13579][26]|[2468][048]))"
                            required>
                        <small class="form-text text-muted">dd.mm.yyyy</small>
                    </div>
                </form>
                <button type="button" class="btn btn-secondary float-right" data-dismiss="modal">Cancel</button>
                <button type="submit" form="accForm" class="btn btn-primary">Submit</button>
            </div>
        </div>
    </div>
</div>
<script>
function acc_decs() { 
    return parseInt($('#accForm select[name=currency] option:selected').data('decs'));

}
$(document).ready(function() {
    console.log(acc_decs());
    update_currency('#accForm input[type=number]', acc_decs(), undefined, false);
});
$('#accForm select[name=currency], #accForm input[type=number]').change(function() {
    update_currency('#accForm input[type=number]', acc_decs(), undefined, false);
});
</script>